<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>UberList</title>
    <script src="knockout-3.2.0.debug.js"></script>
    <script src="jquery-2.1.1.js"></script>
    <script src="listItemViewModel.js"></script>
</head>
<body>
    <input data-bind="value: search, valueUpdate: 'input'" />
    <input type="button" data-bind="click: filterNodes" value="Search" />
    <input type="button" data-bind="click: clearFilter" value="Clear" />

    <div data-bind="foreach: displayNodes">
        <h1 data-bind="text: text"></h1>
        <button data-bind="click: AddNode">+</button>
        <!-- ko template: "list-item-template" --><!-- /ko -->
    </div>

    <script id="list-item-template" type="text/html">
        <ol data-bind="foreach: children">
            <li>
                <a href="#" data-bind="click: $parent.ToggleVisible, text: collapsed() ? '+' : '-', visible: children().length"></a>
                <input data-bind="value: text" />
                <input type="checkbox" data-bind="checked: complete" />
                <button data-bind="click: $parent.AddNode">+</button>
                <button data-bind="click: $parent.RemoveNode">-</button>
                <div data-bind="visible: !collapsed()">
                    <!-- ko template: { name: "list-item-template" } --><!-- /ko -->
                </div>
            </li>
        </ol>
    </script>

    <script>
        var data = [
            {
                text: "My Lists",
                complete: false,
                children: [
                    {
                        text: "Produce",
                        complete: false,
                        children: [
                            { text: "Lettuce", complete: false },
                            { text: "Tomatoes", complete: false },
                            { text: "Apples", complete: false },
                            { text: "Potatoes", complete: false },
                        ]
                    },
                    {
                        text: "Dairy",
                        complete: false,
                        children: [
                            { text: "Milk", complete: false },
                            { text: "Cheese", complete: false },
                        ]
                    },
                    {
                        text: "Frozen",
                        complete: false,
                        children: [
                            { text: "Pizza", complete: false },
                            { text: "Ice Cream", complete: false },
                            { text: "Waffles", complete: false },
                        ]
                    }
                ]
            }
        ];


        $(function () {
            listItemViewModel.init(data[0]);
        }());
    </script>
</body>

</html>